<div class="aditivo-list-container">
  <h3>Aditivos</h3>

  <div *ngIf="loading" class="loading-message">Processando...</div>
  <div *ngIf="error" class="error-message">{{ error }}</div>

  <div *ngIf="canManageAditivos" class="card aditivo-form">
    <h4>Adicionar Novo Aditivo</h4>
    <form (ngSubmit)="addAditivo()">
      <div class="form-group">
        <label for="descricao">Descrição</label>
        <input type="text" id="descricao" name="descricao" [(ngModel)]="newAditivo.descricao" required>
      </div>
      <div class="form-group">
        <label for="data">Data</label>
        <input type="date" id="data" name="data" [(ngModel)]="newAditivo.data" required>
      </div>
      <button type="submit" class="btn-primary">Adicionar Aditivo</button>
    </form>
  </div>

  <div class="card aditivos-display">
    <h4>Aditivos Registrados</h4>
    <ul>
      <li *ngFor="let aditivo of aditivos">
        <span>{{ aditivo.data | date:'shortDate' }}: {{ aditivo.descricao }}</span>
        <button *ngIf="canManageAditivos" (click)="deleteAditivo(aditivo.id)" class="btn-danger">Excluir</button>
      </li>
    </ul>
  </div>

  <div *ngIf="!aditivos || aditivos.length === 0 && !loading" class="no-data-message">
    Nenhum aditivo registrado para esta obra.
  </div>
</div>